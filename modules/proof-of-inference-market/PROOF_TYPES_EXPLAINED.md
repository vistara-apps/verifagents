# Proof Types Explained - What Each Hash Means

## ‚ùó Important Clarification

**You're correct!** The attestation hash `0x8a023c3518aba518fb5b80b9b359a5ba7440964e6534a8fab4086524fb1be2df` is **NOT a blockchain transaction** - it's a cryptographic hash generated by the AVS. Only certain hashes are actual on-chain transactions.

---

## üîê Types of Proofs Generated

### 1. **Verification Proof** (ML Agent)
**Type**: Off-chain cryptographic hash
**Where**: Generated by ML Verification Agent ([python-ml-agent.py:265-282](file:///Users/mayurchougule/development/ethereum/verifagents/modules/proof-of-inference-market/python-ml-agent.py#L265-L282))
**Example**: `0x5172b6f83709511a05df37f854ff3a8ed575e3c489668206c1d00738578565c3`

**What it contains**:
```python
proof_data = {
    "request_id": request_id,
    "model_id": model_id,
    "input_hash": hashlib.sha256(input_data.encode()).hexdigest()[:16],
    "output_hash": hashlib.sha256(actual_output.encode()).hexdigest()[:16],
    "is_valid": is_valid,
    "confidence": confidence,
    "timestamp": int(time.time()),
    "verifier": "RealMLVerificationAgent"
}
proof_hash = hashlib.sha256(json.dumps(proof_data, sort_keys=True).encode()).hexdigest()
return f"0x{proof_hash}"
```

**Purpose**: Proves that ML verification was performed with specific inputs/outputs
**Verifiable**: ‚úÖ Yes - by re-running verification with same inputs
**On BaseScan**: ‚ùå No - this is not a blockchain transaction

---

### 2. **Attestation Hash** (AVS Orchestrator)
**Type**: Off-chain cryptographic hash
**Where**: Generated by AVS Orchestrator ([avs-orchestrator.py:284-299](file:///Users/mayurchougule/development/ethereum/verifagents/modules/proof-of-inference-market/avs-orchestrator.py#L284-L299))
**Example**: `0x8a023c3518aba518fb5b80b9b359a5ba7440964e6534a8fab4086524fb1be2df`

**What it contains**:
```python
attestation_data = {
    "request_id": req.requestId,
    "model_id": req.modelId,
    "agent": req.agent,
    "is_valid": ml_result.get('is_valid', False),
    "confidence": ml_result.get('confidence', 0),
    "verification_proof": ml_result.get('proof', ''),
    "timestamp": int(time.time())
}
attestation_hash = hashlib.sha256(json.dumps(attestation_data, sort_keys=True).encode()).hexdigest()
return f"0x{attestation_hash}"
```

**Purpose**: AVS's signature/approval of the verification result
**Verifiable**: ‚úÖ Yes - by checking AVS's records
**On BaseScan**: ‚ùå No - this is not a blockchain transaction

**This is the hash you asked about!** It's an AVS attestation, not a blockchain tx.

---

### 3. **Payment Hash** (4Mica Service)
**Type**: Can be either on-chain transaction OR simulated hash
**Where**: Generated by Payment Service ([4mica-payment-service.py:313-327](file:///Users/mayurchougule/development/ethereum/verifagents/modules/proof-of-inference-market/4mica-payment-service.py#L313-L327))

#### 3a. **Real Blockchain Transaction** (with funded wallet)
**Example**: `0x1234567890abcdef...` (would be a real tx hash)

```python
# Real on-chain transaction
tx_hash = self.w3.eth.send_raw_transaction(signed_txn.rawTransaction)
return tx_hash.hex()
```

**Purpose**: Actual payment processed on Base Sepolia
**Verifiable**: ‚úÖ Yes - on BaseScan
**On BaseScan**: ‚úÖ Yes - viewable at `https://sepolia.basescan.org/tx/{tx_hash}`

#### 3b. **Simulated Payment Hash** (without funded wallet)
**Example**: `0x68e1ec21317f83c11a50204d564ed0e8028c1c42db437678d055eb8e13b83436`

```python
# Simulated hash (current mode)
receipt_data = {
    "tab_id": tab_id,
    "req_id": req_id,
    "amount": amount,
    "recipient": recipient,
    "timestamp": int(time.time()),
    "service": "4mica-payment"
}
receipt_hash = hashlib.sha256(json.dumps(receipt_data, sort_keys=True).encode()).hexdigest()
return f"0x{receipt_hash}"
```

**Purpose**: Simulates what payment hash would be
**Verifiable**: ‚úÖ Yes - by checking hash structure
**On BaseScan**: ‚ùå No - simulated, not real transaction

---

### 4. **Transaction Hash** (ERC-8004 Receipt)
**Type**: Can be either on-chain transaction OR simulated hash
**Where**: Generated by Receipt Service ([erc8004-receipt-service.py:228-273](file:///Users/mayurchougule/development/ethereum/verifagents/modules/proof-of-inference-market/erc8004-receipt-service.py#L228-L273))

#### 4a. **Real On-Chain Receipt** (with contract call)
**Example**: `0xabcdef123456...` (would be a real tx hash)

```python
# Real on-chain minting
tx_hash = self.w3.eth.send_raw_transaction(signed_txn.rawTransaction)
return tx_hash.hex()
```

**Purpose**: Receipt NFT minted on Base Sepolia
**Verifiable**: ‚úÖ Yes - on BaseScan
**On BaseScan**: ‚úÖ Yes - viewable at `https://sepolia.basescan.org/tx/{tx_hash}`

#### 4b. **Simulated Receipt Hash** (without contract call)
**Example**: `0x5e2a806cc922540cffcf70ab159e6106ad6ea13d4d6ac757a8c940e03f31555e`

```python
# Simulated on-chain minting
tx_data = f"{agent_id}{task_id}{result_hash}{confidence}{int(time.time())}"
tx_hash = hashlib.sha256(tx_data.encode()).hexdigest()
return f"0x{tx_hash}"
```

**Purpose**: Simulates what receipt hash would be
**Verifiable**: ‚úÖ Yes - by checking hash structure
**On BaseScan**: ‚ùå No - simulated, not real transaction

---

## üìä Summary Table

| Proof Type | On-Chain? | BaseScan Link? | Current Mode | Code Location |
|------------|-----------|----------------|--------------|---------------|
| **Verification Proof** | ‚ùå Off-chain | ‚ùå No | Always generated | [python-ml-agent.py:265](file:///Users/mayurchougule/development/ethereum/verifagents/modules/proof-of-inference-market/python-ml-agent.py#L265) |
| **Attestation Hash** | ‚ùå Off-chain | ‚ùå No | Always generated | [avs-orchestrator.py:284](file:///Users/mayurchougule/development/ethereum/verifagents/modules/proof-of-inference-market/avs-orchestrator.py#L284) |
| **Payment Hash** | ‚ö†Ô∏è Can be | ‚ö†Ô∏è If real | Simulated* | [4mica-payment-service.py:313](file:///Users/mayurchougule/development/ethereum/verifagents/modules/proof-of-inference-market/4mica-payment-service.py#L313) |
| **Transaction Hash** | ‚ö†Ô∏è Can be | ‚ö†Ô∏è If real | Simulated* | [erc8004-receipt-service.py:228](file:///Users/mayurchougule/development/ethereum/verifagents/modules/proof-of-inference-market/erc8004-receipt-service.py#L228) |

*Simulated because wallet is not funded. Will be real on-chain transactions when wallet has Base Sepolia ETH.

---

## üéØ Your Question: Why Isn't It On BaseScan?

You checked: `0x8a023c3518aba518fb5b80b9b359a5ba7440964e6534a8fab4086524fb1be2df`

**This is an Attestation Hash** - it's:
- ‚úÖ A valid cryptographic proof
- ‚úÖ Verifiable by checking AVS records
- ‚ùå NOT a blockchain transaction
- ‚ùå NOT searchable on BaseScan

**To see REAL on-chain transactions**, you need:

1. **Fund the wallet** with Base Sepolia ETH
2. **The payment hash** will then be a real transaction
3. **The receipt hash** will then be a real transaction

---

## üîç How to Get Real On-Chain Proofs

### Step 1: Fund Wallet
```bash
# Get Base Sepolia ETH from faucet
# https://www.alchemy.com/faucets/base-sepolia

# Send to this address:
# 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
```

### Step 2: Restart Services
```bash
./stop-all-services.sh
./start-all-services.sh
```

### Step 3: Run Demo
```bash
cd demo && python3 end_to_end_demo.py
```

### Step 4: Check BaseScan
Now the **paymentHash** and **transactionHash** in the response will be REAL blockchain transactions viewable on BaseScan!

Example:
```json
{
  "verificationProof": "0x5172...",  // Off-chain, not on BaseScan
  "attestationHash": "0x8a023...",   // Off-chain, not on BaseScan
  "paymentHash": "0xabc123...",      // ‚úÖ Real tx, check BaseScan!
  "receiptId": 123456                // ‚úÖ Real receipt, check contract!
}
```

---

## üìù Example: Real vs Simulated

### Current Output (Simulated)
```json
{
  "requestId": 1,
  "verificationProof": "0x5172b6f8...",     // ‚ùå Not on BaseScan (off-chain)
  "attestationHash": "0x8a023c35...",       // ‚ùå Not on BaseScan (off-chain)
  "paymentHash": null,                      // ‚ùå No payment (not funded)
  "receiptId": null                         // ‚ùå No receipt (not funded)
}
```

### With Funded Wallet (Real)
```json
{
  "requestId": 1,
  "verificationProof": "0x5172b6f8...",     // ‚ùå Not on BaseScan (off-chain)
  "attestationHash": "0x8a023c35...",       // ‚ùå Not on BaseScan (off-chain)
  "paymentHash": "0x1234abcd...",           // ‚úÖ Real tx on BaseScan!
  "receiptId": 123456                       // ‚úÖ Real receipt on contract!
}
```

---

## üéì Key Takeaway

**Not all hashes are blockchain transactions!**

- **Verification Proof** = Off-chain proof of ML work
- **Attestation Hash** = Off-chain AVS approval
- **Payment Hash** = Can be real blockchain tx (if wallet funded)
- **Receipt Hash** = Can be real blockchain tx (if wallet funded)

**Only payment and receipt hashes will appear on BaseScan, and only when the wallet is funded.**

---

## üîó Where to Find Each Hash

### In Code:
1. **Verification Proof**: [python-ml-agent.py#L265-L282](file:///Users/mayurchougule/development/ethereum/verifagents/modules/proof-of-inference-market/python-ml-agent.py#L265-L282)
2. **Attestation Hash**: [avs-orchestrator.py#L284-L299](file:///Users/mayurchougule/development/ethereum/verifagents/modules/proof-of-inference-market/avs-orchestrator.py#L284-L299)
3. **Payment Hash**: [4mica-payment-service.py#L313-L327](file:///Users/mayurchougule/development/ethereum/verifagents/modules/proof-of-inference-market/4mica-payment-service.py#L313-L327)
4. **Transaction Hash**: [erc8004-receipt-service.py#L264-L273](file:///Users/mayurchougule/development/ethereum/verifagents/modules/proof-of-inference-market/erc8004-receipt-service.py#L264-L273)

### On BaseScan (when funded):
- Payment transactions: `https://sepolia.basescan.org/tx/{paymentHash}`
- Receipt minting: `https://sepolia.basescan.org/tx/{transactionHash}`
- Contract: `https://sepolia.basescan.org/address/0x7177a6867296406881E20d6647232314736Dd09A`

---

## ‚úÖ Conclusion

The hash you asked about (`0x8a023c35...`) is working correctly - it's just not a blockchain transaction. It's an **AVS attestation hash** that proves the AVS approved the verification result.

To get **real blockchain transaction hashes** that appear on BaseScan:
1. Fund the wallet with Base Sepolia ETH
2. Restart services
3. Run demo again
4. Check the **paymentHash** and **receiptId** on BaseScan

The system is working as designed! üöÄ
